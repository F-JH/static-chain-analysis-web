import{a5 as Z,b8 as ke,b9 as te,ab as A,a2 as Te,e as pe,R as Ve,E as De,ba as Me,bb as Se,g as k,U as C,ap as H,bc as ne,aa as le,a0 as $e,a1 as Re,aq as Ae,_ as Le,W as T,o as h,l as w,w as r,X as W,m as o,j as f,n as c,v as re,q as z,h as j,z as U,t as V,P as D,aC as N,r as Ke,O as y,Z as X,T as Oe,av as ze,ax as ce,i as fe,bd as ve,aO as ie,F as Ue,aL as Ne,at as de,be as ue,aY as qe,K as He,bf as je,bg as Ge}from"./index-f4245f6e.js";import{c as J,k as Q,E as We,m as Xe,x as Ze,y as Ye,z as Je,t as ge,r as he,q as ye,o as be,p as Ce,v as q,w as Qe}from"./CredentialUrl-e8a39a7d.js";const _e=(e,s)=>{let n;Z(()=>e.value,l=>{var i,t;l?(n=document.activeElement,ke(s)&&((t=(i=s.value).focus)==null||t.call(i))):n.focus()})},Y="_trap-focus-children",F=[],me=e=>{if(F.length===0)return;const s=F[F.length-1][Y];if(s.length>0&&e.code===Te.tab){if(s.length===1){e.preventDefault(),document.activeElement!==s[0]&&s[0].focus();return}const n=e.shiftKey,l=e.target===s[0],i=e.target===s[s.length-1];l&&n&&(e.preventDefault(),s[s.length-1].focus()),i&&!n&&(e.preventDefault(),s[0].focus())}},xe={beforeMount(e){e[Y]=te(e),F.push(e),F.length<=1&&document.addEventListener("keydown",me)},updated(e){A(()=>{e[Y]=te(e)})},unmounted(){F.shift(),F.length===0&&document.removeEventListener("keydown",me)}},es=pe({name:"ElMessageBox",directives:{TrapFocus:xe},components:{ElButton:J,ElFocusTrap:Ve,ElInput:Q,ElOverlay:We,ElIcon:De,...Me},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Xe},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:s}){const{locale:n,zIndex:l,ns:i,size:t}=Se("message-box",k(()=>e.buttonSize)),{t:u}=n,{nextZIndex:v}=l,g=C(!1),a=H({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:v()}),b=k(()=>{const m=a.type;return{[i.bm("icon",m)]:m&&ne[m]}}),S=le(),p=le(),d=k(()=>a.icon||ne[a.type]||""),G=k(()=>!!a.message),P=C(),_=C(),$=C(),K=C(),x=C(),Ee=k(()=>a.confirmButtonClass);Z(()=>a.inputValue,async m=>{await A(),e.boxType==="prompt"&&m!==null&&se()},{immediate:!0}),Z(()=>g.value,m=>{var E,I;m&&(e.boxType!=="prompt"&&(a.autofocus?$.value=(I=(E=x.value)==null?void 0:E.$el)!=null?I:P.value:$.value=P.value),a.zIndex=v()),e.boxType==="prompt"&&(m?A().then(()=>{var oe;K.value&&K.value.$el&&(a.autofocus?$.value=(oe=Pe())!=null?oe:P.value:$.value=P.value)}):(a.editorErrorMessage="",a.validateError=!1))});const we=k(()=>e.draggable);Ze(P,_,we),$e(async()=>{await A(),e.closeOnHashChange&&window.addEventListener("hashchange",R)}),Re(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",R)});function R(){g.value&&(g.value=!1,A(()=>{a.action&&s("action",a.action)}))}const ee=()=>{e.closeOnClickModal&&O(a.distinguishCancelAndClose?"close":"cancel")},Be=Je(ee),Fe=m=>{if(a.inputType!=="textarea")return m.preventDefault(),O("confirm")},O=m=>{var E;e.boxType==="prompt"&&m==="confirm"&&!se()||(a.action=m,a.beforeClose?(E=a.beforeClose)==null||E.call(a,m,a,R):R())},se=()=>{if(e.boxType==="prompt"){const m=a.inputPattern;if(m&&!m.test(a.inputValue||""))return a.editorErrorMessage=a.inputErrorMessage||u("el.messagebox.error"),a.validateError=!0,!1;const E=a.inputValidator;if(typeof E=="function"){const I=E(a.inputValue);if(I===!1)return a.editorErrorMessage=a.inputErrorMessage||u("el.messagebox.error"),a.validateError=!0,!1;if(typeof I=="string")return a.editorErrorMessage=I,a.validateError=!0,!1}}return a.editorErrorMessage="",a.validateError=!1,!0},Pe=()=>{const m=K.value.$refs;return m.input||m.textarea},ae=()=>{O("close")},Ie=()=>{e.closeOnPressEscape&&ae()};return e.lockScroll&&Ye(g),_e(g),{...Ae(a),ns:i,overlayEvent:Be,visible:g,hasMessage:G,typeClass:b,contentId:S,inputId:p,btnSize:t,iconComponent:d,confirmButtonClasses:Ee,rootRef:P,focusStartRef:$,headerRef:_,inputRef:K,confirmRef:x,doClose:R,handleClose:ae,onCloseRequested:Ie,handleWrapperClick:ee,handleInputEnter:Fe,handleAction:O,t:u}}}),ss=["aria-label","aria-describedby"],as=["aria-label"],os=["id"];function ts(e,s,n,l,i,t){const u=T("el-icon"),v=T("close"),g=T("el-input"),a=T("el-button"),b=T("el-focus-trap"),S=T("el-overlay");return h(),w(Oe,{name:"fade-in-linear",onAfterLeave:s[11]||(s[11]=p=>e.$emit("vanish")),persisted:""},{default:r(()=>[W(o(S,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:r(()=>[f("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:c(`${e.ns.namespace.value}-overlay-message-box`),onClick:s[8]||(s[8]=(...p)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...p)),onMousedown:s[9]||(s[9]=(...p)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...p)),onMouseup:s[10]||(s[10]=(...p)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...p))},[o(b,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:r(()=>[f("div",{ref:"rootRef",class:c([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:re(e.customStyle),tabindex:"-1",onClick:s[7]||(s[7]=z(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(h(),j("div",{key:0,ref:"headerRef",class:c(e.ns.e("header"))},[f("div",{class:c(e.ns.e("title"))},[e.iconComponent&&e.center?(h(),w(u,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:r(()=>[(h(),w(U(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),f("span",null,D(e.title),1)],2),e.showClose?(h(),j("button",{key:0,type:"button",class:c(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:s[0]||(s[0]=p=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:s[1]||(s[1]=N(z(p=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[o(u,{class:c(e.ns.e("close"))},{default:r(()=>[o(v)]),_:1},8,["class"])],42,as)):V("v-if",!0)],2)):V("v-if",!0),f("div",{id:e.contentId,class:c(e.ns.e("content"))},[f("div",{class:c(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(h(),w(u,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:r(()=>[(h(),w(U(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),e.hasMessage?(h(),j("div",{key:1,class:c(e.ns.e("message"))},[Ke(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(h(),w(U(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(h(),w(U(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:r(()=>[y(D(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):V("v-if",!0)],2),W(f("div",{class:c(e.ns.e("input"))},[o(g,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":s[2]||(s[2]=p=>e.inputValue=p),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:c({invalid:e.validateError}),onKeydown:N(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),f("div",{class:c(e.ns.e("errormsg")),style:re({visibility:e.editorErrorMessage?"visible":"hidden"})},D(e.editorErrorMessage),7)],2),[[X,e.showInput]])],10,os),f("div",{class:c(e.ns.e("btns"))},[e.showCancelButton?(h(),w(a,{key:0,loading:e.cancelButtonLoading,class:c([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:s[3]||(s[3]=p=>e.handleAction("cancel")),onKeydown:s[4]||(s[4]=N(z(p=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:r(()=>[y(D(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):V("v-if",!0),W(o(a,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:c([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:s[5]||(s[5]=p=>e.handleAction("confirm")),onKeydown:s[6]||(s[6]=N(z(p=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:r(()=>[y(D(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[X,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,ss)]),_:3},8,["z-index","overlay-class","mask"]),[[X,e.visible]])]),_:3})}var ns=Le(es,[["render",ts],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const L=new Map,ls=e=>{let s=document.body;return e.appendTo&&(ce(e.appendTo)&&(s=document.querySelector(e.appendTo)),ue(e.appendTo)&&(s=e.appendTo),ue(s)||(s=document.body)),s},rs=(e,s,n=null)=>{const l=o(ns,e,de(e.message)||fe(e.message)?{default:de(e.message)?e.message:()=>e.message}:null);return l.appContext=n,ve(l,s),ls(e).appendChild(s.firstElementChild),l.component},is=()=>document.createElement("div"),ds=(e,s)=>{const n=is();e.onVanish=()=>{ve(null,n),L.delete(i)},e.onAction=t=>{const u=L.get(i);let v;e.showInput?v={value:i.inputValue,action:t}:v=t,e.callback?e.callback(v,l.proxy):t==="cancel"||t==="close"?e.distinguishCancelAndClose&&t!=="cancel"?u.reject("close"):u.reject("cancel"):u.resolve(v)};const l=rs(e,n,s),i=l.proxy;for(const t in e)ie(e,t)&&!ie(i.$props,t)&&(i[t]=e[t]);return i.visible=!0,i};function M(e,s=null){if(!ze)return Promise.reject();let n;return ce(e)||fe(e)?e={message:e}:n=e.callback,new Promise((l,i)=>{const t=ds(e,s??M._context);L.set(t,{options:e,callback:n,resolve:l,reject:i})})}const us=["alert","confirm","prompt"],ms={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};us.forEach(e=>{M[e]=ps(e)});function ps(e){return(s,n,l,i)=>{let t="";return Ue(n)?(l=n,t=""):Ne(n)?t="":t=n,M(Object.assign({title:t,message:s,type:"",...ms[e]},l,{boxType:e}),i)}}M.close=()=>{L.forEach((e,s)=>{s.doClose()}),L.clear()};M._context=null;const B=M;B.install=e=>{B._context=e._context,e.config.globalProperties.$msgbox=B,e.config.globalProperties.$messageBox=B,e.config.globalProperties.$alert=B.alert,e.config.globalProperties.$confirm=B.confirm,e.config.globalProperties.$prompt=B.prompt};const cs=B;const fs=()=>Qe({title:"info",message:"删除成功",type:"info"}),vs=pe({name:"CredentialsProvider",components:{ElFormItem:ge,ElForm:he,ElInput:Q,ElButton:J,ElDialog:ye,ElTable:be,ElTableColumn:Ce},setup(){const e=C(),s=C(!1),n=C(""),l=H([]),i=C(""),t=H({name:"",username:"",password:"",publicKey:"",privateKey:"",passphrase:""}),u=H({name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:0,max:20,message:"0~20个字符",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[],publicKey:[],privateKey:[]});return{diaLogTitle:i,ruleFormRef:e,searchName:n,credentialsProviderList:l,addCredentialsProviderDialog:s,credentialsProviderForm:t,formRules:u}},methods:{editItem(e){this.credentialsProviderForm.id=e.id,this.resetFormData(e.name,e.username,e.password,e.passphrase,e.publicKey,e.privateKey),this.diaLogTitle="编辑凭据",this.addCredentialsProviderDialog=!0},deleteItem(e){cs.confirm("是否要删除？","Waring",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{this.service.delete(q.deleteCredential+"?id="+e.id).then(s=>{fs(),this.searchItem()})}).catch(()=>{})},async putCredentialsProvider(e){await(e==null?void 0:e.validate((s,n)=>{if(s){let l;this.diaLogTitle==="编辑凭据"?l=q.editCredential:l=q.addCredential,this.service.post(l,this.credentialsProviderForm).then(i=>{this.resetFormData(),this.addCredentialsProviderDialog=!1,this.searchItem()})}}))},searchItem(){this.service.get(q.getCredential+"?key="+this.searchName).then(e=>{console.log(e),this.credentialsProviderList.splice(0,this.credentialsProviderList.length);for(let s of e.data)this.credentialsProviderList.push(s)})},resetFormData(e="",s="",n="",l="",i="",t=""){this.credentialsProviderForm.name=e,this.credentialsProviderForm.username=s,this.credentialsProviderForm.password=n,this.credentialsProviderForm.passphrase=l,this.credentialsProviderForm.publicKey=i,this.credentialsProviderForm.privateKey=t}},mounted(){this.searchItem()}});const gs=e=>(je("data-v-14df54f0"),e=e(),Ge(),e),hs={class:"search"},ys={class:"search-lcd",style:{display:"inline-flex"}},bs={class:"search-item"},Cs=gs(()=>f("label",{style:{width:"auto"}},"搜索: ",-1)),Es={class:"search-option"},ws={style:{"margin-top":"10px",padding:"10px 0",display:"inline-flex",width:"100%"}},Bs={class:"data-area"},Fs={class:"dialogFooter"};function Ps(e,s,n,l,i,t){const u=Q,v=J,g=Ce,a=be,b=ge,S=he,p=ye;return h(),j(He,null,[f("div",hs,[f("div",ys,[f("div",bs,[Cs,o(u,{placeholder:"输入凭据名称搜索",modelValue:e.searchName,"onUpdate:modelValue":s[0]||(s[0]=d=>e.searchName=d),style:{width:"280px"}},null,8,["modelValue"])]),f("div",Es,[o(v,{type:"primary",onClick:e.searchItem},{default:r(()=>[y("查询")]),_:1},8,["onClick"])])])]),f("div",ws,[o(v,{type:"primary",onClick:s[1]||(s[1]=d=>{e.resetFormData(),e.diaLogTitle="添加凭据",e.addCredentialsProviderDialog=!0})},{default:r(()=>[y("添加git凭据")]),_:1})]),f("div",Bs,[o(a,{data:e.credentialsProviderList},{default:r(()=>[o(g,{label:"名称",prop:"name"}),o(g,{label:"用户名",prop:"username"}),o(g,{label:"密码",prop:"password"}),o(g,{label:"公钥",prop:"publicKey"}),o(g,{label:"私钥",prop:"privateKey"}),o(g,{label:"passphrase",prop:"passphrase"}),o(g,{label:"操作"},{default:r(d=>[o(v,{type:"primary",onClick:G=>e.editItem(d.row)},{default:r(()=>[y("编辑")]),_:2},1032,["onClick"]),o(v,{onClick:G=>e.deleteItem(d.row)},{default:r(()=>[y("删除")]),_:2},1032,["onClick"])]),_:1}),y("> ")]),_:1},8,["data"])]),o(p,{modelValue:e.addCredentialsProviderDialog,"onUpdate:modelValue":s[10]||(s[10]=d=>e.addCredentialsProviderDialog=d),style:{"margin-top":"15vh",width:"700px"}},{header:r(()=>[y(D(e.diaLogTitle),1)]),footer:r(()=>[f("span",Fs,[o(v,{onClick:s[8]||(s[8]=d=>e.addCredentialsProviderDialog=!1)},{default:r(()=>[y("取消")]),_:1}),o(v,{type:"primary",onClick:s[9]||(s[9]=d=>e.putCredentialsProvider(e.ruleFormRef))},{default:r(()=>[y("确定")]),_:1})])]),default:r(()=>[o(S,{ref:"ruleFormRef",model:e.credentialsProviderForm,style:{display:"flex","flex-wrap":"wrap"},"label-position":"right",rules:e.formRules},{default:r(()=>[o(b,{label:"名称",class:"formItem","label-width":"80",prop:"name"},{default:r(()=>[o(u,{modelValue:e.credentialsProviderForm.name,"onUpdate:modelValue":s[2]||(s[2]=d=>e.credentialsProviderForm.name=d),style:{width:"550px"},placeholder:"输入凭据别名"},null,8,["modelValue"])]),_:1}),o(b,{label:"用户名",class:"formItem","label-width":"80",prop:"username"},{default:r(()=>[o(u,{modelValue:e.credentialsProviderForm.username,"onUpdate:modelValue":s[3]||(s[3]=d=>e.credentialsProviderForm.username=d),style:{width:"550px"},placeholder:"用户名"},null,8,["modelValue"])]),_:1}),o(b,{label:"密码",class:"formItem","label-width":"80",prop:"password"},{default:r(()=>[o(u,{modelValue:e.credentialsProviderForm.password,"onUpdate:modelValue":s[4]||(s[4]=d=>e.credentialsProviderForm.password=d),style:{width:"550px"},placeholder:"输入密码"},null,8,["modelValue"])]),_:1}),o(b,{label:"passphrase",class:"formItem","label-width":"80",prop:"passphrase"},{default:r(()=>[o(u,{modelValue:e.credentialsProviderForm.passphrase,"onUpdate:modelValue":s[5]||(s[5]=d=>e.credentialsProviderForm.passphrase=d),style:{width:"550px"},placeholder:"输入passphrase"},null,8,["modelValue"])]),_:1}),o(b,{label:"公钥",class:"formItem","label-width":"80",prop:"publicKey"},{default:r(()=>[o(u,{modelValue:e.credentialsProviderForm.publicKey,"onUpdate:modelValue":s[6]||(s[6]=d=>e.credentialsProviderForm.publicKey=d),style:{width:"550px"},type:"textarea",autosize:{minRows:2,maxRows:4}},null,8,["modelValue"])]),_:1}),o(b,{label:"私钥",class:"formItem","label-width":"80",prop:"privateKey"},{default:r(()=>[o(u,{modelValue:e.credentialsProviderForm.privateKey,"onUpdate:modelValue":s[7]||(s[7]=d=>e.credentialsProviderForm.privateKey=d),style:{width:"550px"},type:"textarea",autosize:{minRows:2,maxRows:4}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}const Ts=qe(vs,[["render",Ps],["__scopeId","data-v-14df54f0"]]);export{Ts as default};
